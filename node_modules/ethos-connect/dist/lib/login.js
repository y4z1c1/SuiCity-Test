import p from"store2";import c from"./lib.js";const d=async({email:g,provider:e,apiKey:t})=>{const{walletAppUrl:o,redirectTo:n}=c.getConfiguration(),u=p.namespace("users");if(e){const r=n??location.href,i=`${o}/auth?apiKey=${t}&returnTo=${encodeURIComponent(r)}`;location.href=`${o}/socialauth?provider=${e}&redirectTo=${encodeURIComponent(i)}`;return}return new Promise((r,i)=>{const s=a=>{if(a.origin===o){const{action:m,data:l}=a.data;if(m!=="login")return;window.removeEventListener("message",s),u("current",l),r(l)}};window.addEventListener("message",s),c.postIFrameMessage({action:"login",data:{email:g,provider:e,returnTo:n??window.location.href,apiKey:t}})})};var h=d;export{h as default};
