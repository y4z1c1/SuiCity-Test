import u from"lodash-es/get.js";const a=t=>!!t.type&&t.type.includes("kiosk")&&!!t.content&&"fields"in t.content&&("kiosk"in t.content.fields||"for"in t.content.fields),g=async(t,o)=>{if(!a(o))return[];let n=u(o,"content.fields.kiosk");if(n||(n=u(o,"content.fields.for")),!n)return[];let i=[],s;for(;s!==null;){const e=await t.getDynamicFields({parentId:n,cursor:s});if(!e.data)return[];i=[...i||[],...e.data],e.hasNextPage&&e.nextCursor!==s?s=e.nextCursor:s=null}const c=i.filter(e=>e.name.type==="0x0000000000000000000000000000000000000000000000000000000000000002::kiosk::Item"||e.name.type==="0x2::kiosk::Item").map(e=>e.objectId);let r=[];const l=30;for(let e=0;e<c.length;e+=l){const p=c.slice(e,e+l),f=await t.multiGetObjects({ids:p,options:{showContent:!0,showType:!0,showDisplay:!0,showOwner:!0}});r=[...r,...f]}return r};export{g as getKioskObjects,a as isKiosk};
