import c from"./getConfiguration.js";import f from"./getIframe.js";import e from"./log.js";import v from"./postIFrameMessage.js";const l=()=>{e("activeUser","Calling Active User");const{walletAppUrl:r,apiKey:a}=c();e("activeUser","Configuration",r,a);const g=m=>{const o=t=>{if(e("activeUser","Message Origin: ",t.origin,r,t),t.origin===r){const{action:n,data:i}=t.data;e("activeUser","Message From Wallet",n,i),n==="user"&&i.apiKey===a&&(window.removeEventListener("message",o),m(i?.user))}};window.addEventListener("message",o);const s={action:"activeUser"};e("activeUser","getIframe"),f(),e('activeUser", "Post message to the iframe',s),v(s)};return new Promise(g)};var w=l;export{w as default};
